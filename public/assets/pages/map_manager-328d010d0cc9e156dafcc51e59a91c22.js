(function(){var a;window.MapManager={},a={},MapManager.initialize_map_and_messages=function(a){var e,n;return e=a.coords.latitude,n=a.coords.longitude,MapManager.send_info_to_server(e,n),MapManager.display_map(e,n),Chat.get_message_list(e,n)},MapManager.getLocation=function(){return navigator.geolocation?navigator.geolocation.getCurrentPosition(MapManager.initialize_map_and_messages,Utils.display_error):display_default_error},MapManager.getLocationAndSendMessage=function(){return navigator.geolocation?navigator.geolocation.getCurrentPosition(Chat.send_message,Utils.display_error):display_default_error},MapManager.add_marker=function(e,n,o){var t,r;return r=new google.maps.LatLng(e,n),t=new google.maps.Marker({position:r,map:a,title:o})},MapManager.display_map=function(e,n){var o;return o={center:new google.maps.LatLng(e,n),zoom:13},a=new google.maps.Map(document.getElementById("map_canvas"),o),MapManager.add_marker(e,n)},MapManager.send_info_to_server=function(a,e){return $.ajax({url:"update_position",type:"PUT",data:{latitude:a,longitude:e}})},google.maps.event.addDomListener(window,"load",MapManager.getLocation)}).call(this);