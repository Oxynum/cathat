(function(){var e,t;window.Chat={},window.dispatcher=new WebSocketRails("0.0.0.0:3000"),e=0,t=0,dispatcher.on_open=function(){return console.log("Connection has been established")},Chat.create_location_message=function(e,t){return{latitude:e,longitude:t,body:$("#message_body").val().trim()}},Chat.get_message_list=function(e,t){return $.get("messages",{latitude:e,longitude:t},function(e){return $("#messages_list").html(e)})},Chat.send_message=function(e){var t;return t=Chat.create_location_message(e.coords.latitude,e.coords.longitude),MapManager.send_info_to_server(e.coords.latitude,e.coords.longitude),dispatcher.trigger("message_received",t),$("#message_body").val("")}}).call(this);